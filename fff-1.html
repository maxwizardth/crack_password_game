<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=0.5">
  <meta charset="utf-8">

	<title>404error</title>
	<link href="bootstrap.min.css" rel="stylesheet">
  <script src="bootstrap5.bundle.min.js"></script>
	<style type="text/css">
    img,input{width: 80%;}
    img{height: inherit;}
    body{
    	background:#444a99;
    	color: white}
    .col-sm-4  h3{margin-top: -10px}
    h1{background: #444ac3;
    	width: 100%;
    }
	</style>

</head>
<body>

	<h1 class="text-center lg">Hacking Game</h1>
<div class="row">

	<div class="col-sm-8">
		 <!--SECOND DESCRIPTION-->
        <div class="row text-center">
		<span class="col-sm-4 h1 digits"></span>
		<span class="col-sm-8 h3 hint text-center"></span>
	    </div>
        <!--SECOND DESCRIPTION-->
        <div class="row text-center">
		<span class="col-sm-4 h1 digits"></span>
		<span class="col-sm-8 h3 hint"></span>
	    </div>
	    <!--SECOND DESCRIPTION-->
        <div class="row text-center">
		<span class="col-sm-4 h1 digits"></span>
		<span class="col-sm-8 h3 hint"></span>
	    </div>
	    <!--SECOND DESCRIPTION-->
        <div class="row text-center">
		<span class="col-sm-4 h1 digits"></span>
		<span class="col-sm-8 h3 hint"></span>
	    </div>
	     <!--SECOND DESCRIPTION-->
        <div class="row text-center">
		<span class="col-sm-4 h1 digits"></span>
		<span class="col-sm-8 h3 hint"></span>
	    </div>
	</div>
	<div class="col-sm-4 text-left" >
		<h3 class="text-center">Crack the code</h3>
		<img src="cracker1.jpg"><br>
		
		<input class="text-center" type="text" name="" placeholder ="*****">
		
	    
	</div>
</div>
</div>


<script type="text/javascript">
function shuffle(array){
 k= array.sort(()=>Math.random()-0.5)
 return k
}

function placement(array,password){
var right=0
for(var i=0;i<password.length;i++){
if (password[i]==array[i]){right+=1}
      };
return right;}

function guessGenerator(wrong,right,wrongDigitList,password){
wrong_digit=shuffle(wrongDigitList).slice(0,wrong)
right_digit=shuffle(password).slice(0,right)
guessDigit=shuffle(wrong_digit.concat(right_digit))
return guessDigit}

//function of guess generator withou shuffling password
function guessGeneratorWS(wrong,right,wrongDigitList,password){
wrong_digit=shuffle(wrongDigitList).slice(0,wrong)
if(right<0){right_digit=password.slice(right,password.length)}
else{right_digit=password.slice(0,right)}
guessDigit=shuffle(wrong_digit.concat(right_digit))
return guessDigit
}
digits=shuffle([0,1,2,3,4,5,6,7,8,9])
places=['and wrongly placed','and one well placed',
' and Two well placed','and three well placed',' and well placed']
correctness=['No digit corrects &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp ','One digit correct ','Two digits correct ','Three digits correct ','Four digits correct ']
function hint(correct,place){
  var theHint;
if(correct==0){
  theHint=correctness[0]}
else if(correct==place){
theHint=correctness[correct]+places[places.length-1]
}
else { theHint=correctness[correct]+places[place]}
return theHint
}
function version(wos,ws,passwordDigit){
password=digits.slice(0,passwordDigit)
wrongDigits=digits.filter(x=> ! new Set(password).has(x));
wrongDigitUsed=wrongDigits.slice(0,5)
//two digit correct 
guess1=guessGeneratorWS(wos[0],wos[1],wrongDigitUsed,password)
//one digit corrects
guess3=guessGeneratorWS(wos[2],wos[3],wrongDigitUsed,password)
 //zero digit correct
guess2=guessGenerator(ws[0],ws[1],wrongDigitUsed,password)
//two digits correct
guess4=guessGenerator(ws[2],ws[3],wrongDigitUsed,password)
taskData=[
[guess1,hint(wos[1],placement(guess1,password))],
[guess2,hint(ws[1],placement(guess2,password))],
[guess3,hint(Math.abs(wos[3]),placement(guess3,password))],
[guess4,hint(ws[3],placement(guess4,password))]]
if(ws[4]){
//two digits correct
guess5=guessGenerator(ws[4],ws[5],wrongDigitUsed,password)

taskData.unshift([guess5,hint(ws[5],placement(guess5,password))])}
return [taskData,password]}

allData=[
version([1,2,2,-1],[2,1,2,1,2,1],3),
version([1,2,2,-1],[1,2,2,1,3,0],3),
version([2,1,1,-2],[2,1,1,2],3),
version([1,2,2,-1],[2,1,1,2,3,0],3),
version([1,2,2,-1],[2,1,2,1,3,0],3)]

var data=shuffle(allData)[1];
var allGuesses=data[0]
var password=data[1]
console.log(allGuesses)
var descrip = document.getElementsByClassName('digits');
var hintList=document.getElementsByClassName('hint')
for(var i=0;i<allGuesses.length;i++){
descrip[i].innerHTML=(allGuesses[i][0]).join(' ');
hintList[i].innerHTML=allGuesses[i][1]
}
</script>
</body>
</html>
